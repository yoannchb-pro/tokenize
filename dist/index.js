!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Tokenizer=t()}(this,(function(){"use strict";const e={defaultType:"UNKNOWN",concatDefaultType:!0};class t{constructor(t){if(!t||!t.tokens)throw new Error('Invalide options: "tokens" is required');this.options=Object.assign({},e,t)}getDefaultType(){return this.options.defaultType}getTokens(){return this.options.tokens}getTokensName(){return[...Object.keys(this.options.tokens),this.getDefaultType()]}tokenize(e){if("string"!=typeof e)return[];const t=[],n=this.getDefaultType(),o=this.options.concatDefaultType,s=Object.entries(this.options.tokens);let i=0,l=0,u=0;for(;i<e.length;){const r=e.slice(i);let p=null,a=null;for(const[e,t]of s){t.lastIndex=0;const n=t.exec(r);if(n&&0!==n.index&&!0===this.options.prioritize&&null===a&&(a=n.index),n&&0===n.index&&(null===a||n[0].length<=a)){p={type:e,value:n[0],groups:n.groups,index:0};break}}p||(p={type:n,value:r[0],index:0});const c=p.value,d=c.split("\n"),h=l,f=u;let T=l,g=u;d.length>1?(T=l+d.length-1,g=d[d.length-1].length):g=u+c.length,l=T,u=g;let y={type:p.type,value:p.value,...p.groups?{groups:p.groups}:{},startLine:h,startColumn:f,endLine:T,endColumn:g};if(y=this.options.callback?this.options.callback(y,t):y,i+=c.length,null===y)continue;if(!this.options.authorizeAdditionalTokens&&!this.getTokensName().includes(y.type))throw new Error(`Unknown token type returned by the callback: "${y.type}" (If you want to allow other types please set authorizeAdditionalTokens to true)`);const E=y.type===n;if(o&&E&&0!==t.length&&t[t.length-1].type===n){const e=t[t.length-1];e.value+=y.value,e.endColumn=y.endColumn,e.endLine=y.endLine}else t.push(y)}return t}}return t.BUILT_IN_RULES={WORD:/\w+/,NUMBER:/\d+(?:\.\d+)?/,ONE_LINE_COMMENT:/\/\/.*/,MULTIPLE_LINE_COMMENT:/\/\*[\s\S]*?\*\//,STRING:/("|'|`)(?<content>(?:\\\1|.)*?)\1/,DOUBLE_QUOTE_STRING:/(")(?<content>(?:\\\1|.)*?)\1/,SINGLE_QUOTE_STRING:/(')(?<content>(?:\\\1|.)*?)\1/,GRAVE_ACCENT_STRING:/(`)(?<content>(?:\\\1|.)*?)\1/,WHITE_SPACES:/\s+/,NEW_LINES:/\n+/},t}));
//# sourceMappingURL=index.js.map
