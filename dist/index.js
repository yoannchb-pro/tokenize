!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Tokenizer=t()}(this,(function(){"use strict";const e={defaultType:"UNKNOWN",concatDefaultType:!0};class t{constructor(t){this.options=Object.assign({},e,t)}getDefaultType(){return this.options.defaultType}getTokens(){return this.options.tokens}getTokensName(){return[...Object.keys(this.options.tokens),this.getDefaultType()]}matcher(e,t,n){n.lastIndex=0;const o=n.exec(e);return o?{type:t,value:o[0],groups:o.groups,index:o.index}:null}tokenize(e){var t,n,o,s,l;const i=[],u=this.getDefaultType(),a=this.options.concatDefaultType,r=this.options.tokens;for(let c=0;c<e.length;++c){const p=e.substring(c,e.length),d=e.substring(0,c),h={type:u,value:p.charAt(0),index:0};let g=h;const f=Object.entries(r).reverse();for(const[e,t]of f){const n=this.matcher(p,e,t);null!==n&&(0===n.index?g=n:g!==h&&g.value.length>n.index&&(g=h))}const T=g.value.split(/\n/g),y=null!==(n=null===(t=d.match(/\n/g))||void 0===t?void 0:t.length)&&void 0!==n?n:0,N=y+Math.max(T.length-1,0),v=null!==(l=null===(s=null===(o=d.split(/\n/g))||void 0===o?void 0:o[y])||void 0===s?void 0:s.length)&&void 0!==l?l:0,E=T[T.length-1].length+(y===N?v:0);let k=Object.assign(Object.assign({type:g.type,value:g.value},g.groups?{groups:g.groups}:{}),{startLine:y,startColumn:v,endLine:N,endColumn:E});if(k=this.options.callback?this.options.callback(k,i):k,c+=g.value.length-1,null===k)continue;if(!this.options.authorizeAdditionalTokens&&!this.getTokensName().includes(k.type))throw new Error(`Unknown token type returned by the callback: "${k.type}" (If you want to allow other types please set authorizeAdditionalTokens to true)`);const b=k.type===u;if(a&&b&&0!==i.length&&i[i.length-1].type===u){const e=i[i.length-1];e.value+=k.value,e.endColumn=k.endColumn,e.endLine=k.endLine}else i.push(k)}return i}}return t.BUILT_IN_RULES={WORD:/\w+/,NUMBER:/\d+(?:\.\d+)?/,ONE_LINE_COMMENT:/\/\/.*/,MULTIPLE_LINE_COMMENT:/\/\*[\s\S]*?\*\//,STRING:/("|'|`)(?<content>(?:\\\1|.)*?)\1/,DOUBLE_QUOTE_STRING:/(")(?<content>(?:\\\1|.)*?)\1/,SINGLE_QUOTE_STRING:/(')(?<content>(?:\\\1|.)*?)\1/,GRAVE_ACCENT_STRING:/(`)(?<content>(?:\\\1|.)*?)\1/,WHITE_SPACES:/\s+/,NEW_LINES:/\n+/},t}));
//# sourceMappingURL=index.js.map
